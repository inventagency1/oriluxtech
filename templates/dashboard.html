<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oriluxchain - Dashboard Overview</title>
    <link rel="stylesheet" href="/static/css/veralix-theme.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+Paaji+2:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">OX</div>
            <h2>ORILUXCHAIN</h2>
            <p>Blockchain Explorer</p>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" data-section="overview">
                <span class="icon">üìä</span>
                <span>Overview</span>
            </a>
            <a href="#" class="nav-item" data-section="blockchain">
                <span class="icon">‚õìÔ∏è</span>
                <span>Blockchain</span>
            </a>
            <a href="#" class="nav-item" data-section="transactions">
                <span class="icon">üìÑ</span>
                <span>Transactions</span>
            </a>
            <a href="#" class="nav-item" data-section="wallets">
                <span class="icon">üíé</span>
                <span>Wallets</span>
            </a>
            <a href="#" class="nav-item" data-section="mining">
                <span class="icon">‚ö°</span>
                <span>Mining</span>
            </a>
            <a href="#" class="nav-item" data-section="network">
                <span class="icon">üåê</span>
                <span>Network</span>
            </a>
            <a href="#" class="nav-item" data-section="smart-contracts">
                <span class="icon">üìú</span>
                <span>Smart Contracts</span>
            </a>
            <a href="/profile" class="nav-item" data-section="profile">
                <span class="icon">üë§</span>
                <span>Profile</span>
            </a>
            <a href="#" class="nav-item" data-section="settings">
                <span class="icon">‚öôÔ∏è</span>
                <span>Settings</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <div class="node-status">
                <div class="status-indicator online"></div>
                <div>
                    <div class="status-label">NODE STATUS</div>
                    <div class="status-value">ONLINE</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="search-bar">
                <input type="text" id="globalSearch" placeholder="Buscar bloques, transacciones, direcciones...">
                <button class="search-btn">üîç</button>
            </div>
            
            <div class="top-bar-actions">
                <div class="notification-badge">
                    <span class="icon">üîî</span>
                    <span class="badge" id="notificationCount">0</span>
                </div>
                <div class="wallet-quick-info">
                    <div class="wallet-balance">
                        <span id="topBarBalance">0</span> VRX
                    </div>
                </div>
            </div>
        </div>

        <!-- Alert Container -->
        <div id="alertContainer"></div>

        <!-- Overview Section -->
        <div class="section active" id="overview-section">
            <div class="section-header">
                <h1>üìä Resumen General</h1>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="refreshAll()">üîÑ Actualizar Todo</button>
                </div>
            </div>

            <!-- Key Metrics -->
            <div class="metrics-grid">
                <div class="metric-card primary">
                    <div class="metric-icon">üîó</div>
                    <div class="metric-content">
                        <div class="metric-label">Bloques Totales</div>
                        <div class="metric-value" id="totalBlocks">0</div>
                        <div class="metric-change positive">+1 hoy</div>
                    </div>
                </div>
                
                <div class="metric-card success">
                    <div class="metric-icon">üí∞</div>
                    <div class="metric-content">
                        <div class="metric-label">Balance Total</div>
                        <div class="metric-value"><span id="totalBalance">0</span> VRX</div>
                        <div class="metric-change positive">+50 √∫ltimo bloque</div>
                    </div>
                </div>
                
                <div class="metric-card warning">
                    <div class="metric-icon">‚è≥</div>
                    <div class="metric-content">
                        <div class="metric-label">Pendientes</div>
                        <div class="metric-value" id="pendingCount">0</div>
                        <div class="metric-change">transacciones</div>
                    </div>
                </div>
                
                <div class="metric-card info">
                    <div class="metric-icon">‚ö°</div>
                    <div class="metric-content">
                        <div class="metric-label">Dificultad</div>
                        <div class="metric-value" id="difficultyMetric">0</div>
                        <div class="metric-change">proof of work</div>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="charts-row">
                <div class="chart-card">
                    <h3>üìà Bloques Minados</h3>
                    <canvas id="blocksChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>üí∏ Transacciones por Bloque</h3>
                    <canvas id="transactionsChart"></canvas>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="activity-section">
                <h3>üïê Actividad Reciente</h3>
                <div id="recentActivity" class="activity-list">
                    <!-- Activity items will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Blockchain Section -->
        <div class="section" id="blockchain-section">
            <div class="section-header">
                <h1>üîó Blockchain Explorer</h1>
                <div class="section-actions">
                    <button class="btn btn-secondary" onclick="exportBlockchain()">üì• Exportar</button>
                    <button class="btn btn-primary" onclick="loadBlockchain()">üîÑ Actualizar</button>
                </div>
            </div>

            <div class="blockchain-explorer">
                <div id="blockchainVisualization" class="blockchain-viz">
                    <!-- Blocks will be rendered here -->
                </div>
            </div>
        </div>

        <!-- Transactions Section -->
        <div class="section" id="transactions-section">
            <div class="section-header">
                <h1>üí∏ Gesti√≥n de Transacciones</h1>
                <button class="btn btn-primary" onclick="showNewTransactionModal()">+ Nueva Transacci√≥n</button>
            </div>

            <div class="transactions-container">
                <div class="transactions-tabs">
                    <button class="tab-btn active" data-tab="pending">Pendientes</button>
                    <button class="tab-btn" data-tab="confirmed">Confirmadas</button>
                    <button class="tab-btn" data-tab="all">Todas</button>
                </div>

                <div class="transactions-list" id="transactionsList">
                    <!-- Transactions will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Wallets Section -->
        <div class="section" id="wallets-section">
            <div class="section-header">
                <h1>üíº Gesti√≥n de Wallets</h1>
                <div class="section-actions">
                    <button class="btn btn-secondary" onclick="importWallet()">üìÇ Importar</button>
                    <button class="btn btn-primary" onclick="createNewWallet()">+ Nueva Wallet</button>
                </div>
            </div>

            <div class="wallets-grid" id="walletsGrid">
                <!-- Wallets will be loaded here -->
            </div>
        </div>

        <!-- Mining Section -->
        <div class="section" id="mining-section">
            <div class="section-header">
                <h1>‚õèÔ∏è Centro de Miner√≠a</h1>
            </div>

            <div class="mining-dashboard">
                <div class="mining-control">
                    <div class="mining-status">
                        <h3>Estado de Miner√≠a</h3>
                        <div class="status-display" id="miningStatus">
                            <div class="status-icon">‚è∏Ô∏è</div>
                            <div class="status-text">Inactivo</div>
                        </div>
                    </div>

                    <div class="mining-stats">
                        <div class="stat-item">
                            <div class="stat-label">Bloques Minados</div>
                            <div class="stat-value" id="minedBlocks">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Recompensas Totales</div>
                            <div class="stat-value"><span id="totalRewards">0</span> VRX</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">√öltimo Tiempo</div>
                            <div class="stat-value" id="lastMiningTime">-</div>
                        </div>
                    </div>

                    <button class="btn btn-large btn-success" id="mineButton" onclick="startMining()">
                        ‚õèÔ∏è Iniciar Miner√≠a
                    </button>
                </div>

                <div class="mining-config">
                    <h3>‚öôÔ∏è Configuraci√≥n de Miner√≠a</h3>
                    <div class="config-item">
                        <label>Dificultad Actual</label>
                        <div class="difficulty-display" id="currentDifficulty">3</div>
                    </div>
                    <div class="config-item">
                        <label>Recompensa por Bloque</label>
                        <div class="reward-display">50 VRX</div>
                    </div>
                    <div class="config-item">
                        <label>Transacciones Pendientes</label>
                        <div class="pending-display" id="miningPending">0</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Network Section -->
        <div class="section" id="network-section">
            <div class="section-header">
                <h1>üåê Red P2P</h1>
                <button class="btn btn-primary" onclick="showAddNodeModal()">+ A√±adir Nodo</button>
            </div>

            <div class="network-overview">
                <div class="network-stats">
                    <div class="network-stat">
                        <div class="stat-icon">üñ•Ô∏è</div>
                        <div>
                            <div class="stat-label">Nodos Conectados</div>
                            <div class="stat-value" id="connectedNodes">0</div>
                        </div>
                    </div>
                    <div class="network-stat">
                        <div class="stat-icon">üì°</div>
                        <div>
                            <div class="stat-label">Estado de Red</div>
                            <div class="stat-value">Sincronizado</div>
                        </div>
                    </div>
                </div>

                <div class="nodes-list" id="nodesList">
                    <!-- Nodes will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Explorer Section -->
        <div class="section" id="explorer-section">
            <div class="section-header">
                <h1>üîç Explorador de Blockchain</h1>
            </div>

            <div class="explorer-search">
                <input type="text" id="explorerSearch" placeholder="Buscar por hash de bloque, direcci√≥n o transacci√≥n...">
                <button class="btn btn-primary" onclick="searchBlockchain()">Buscar</button>
            </div>

            <div id="explorerResults" class="explorer-results">
                <div class="empty-state">
                    <div class="empty-icon">üîç</div>
                    <p>Ingresa un hash de bloque, direcci√≥n o ID de transacci√≥n para buscar</p>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div class="section" id="settings-section">
            <div class="section-header">
                <h1>‚öôÔ∏è Configuraci√≥n</h1>
            </div>

            <div class="settings-container">
                <div class="settings-group">
                    <h3>üé® Apariencia</h3>
                    <div class="setting-item">
                        <label>Tema</label>
                        <select id="themeSelect">
                            <option value="light">Claro</option>
                            <option value="dark">Oscuro</option>
                            <option value="auto">Autom√°tico</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>Auto-refresh</label>
                        <input type="checkbox" id="autoRefreshSetting" checked>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>üîî Notificaciones</h3>
                    <div class="setting-item">
                        <label>Nuevos bloques</label>
                        <input type="checkbox" id="notifyBlocks" checked>
                    </div>
                    <div class="setting-item">
                        <label>Nuevas transacciones</label>
                        <input type="checkbox" id="notifyTransactions" checked>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>üìä Informaci√≥n del Nodo</h3>
                    <div class="info-item">
                        <label>Direcci√≥n del Nodo</label>
                        <div class="info-value" id="nodeAddress">http://localhost:5000</div>
                    </div>
                    <div class="info-item">
                        <label>Wallet del Nodo</label>
                        <div class="info-value monospace" id="nodeWalletAddress">Cargando...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="modalOverlay" class="modal-overlay">
        <div class="modal" id="transactionModal">
            <div class="modal-header">
                <h2>üí∏ Nueva Transacci√≥n</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="newTransactionForm">
                    <div class="form-group">
                        <label>Remitente</label>
                        <input type="text" id="txSender" required>
                    </div>
                    <div class="form-group">
                        <label>Destinatario</label>
                        <input type="text" id="txRecipient" required>
                    </div>
                    <div class="form-group">
                        <label>Cantidad (VRX)</label>
                        <input type="number" id="txAmount" step="0.01" min="0.01" required>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Enviar Transacci√≥n</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html>
